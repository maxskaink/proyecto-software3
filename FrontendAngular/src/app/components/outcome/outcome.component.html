<app-loading [isLoading]="isLoading"></app-loading>
<app-alertmessage
  *ngIf="showAlert"
  [message]="messageAlert"
  [state]="stateAlert"
  (closed)="hideAlert()"
>
</app-alertmessage>
<app-template-header-title [title]="'Configuracion de RA'" [description]="'Configura tu ra a tu gusto'" [confirmBack]="confirmBack"></app-template-header-title>
<div>
  <section class="sectionTitle">

    <div *ngIf="!isEditDescription">
      <h1 class="title">{{title}}</h1>
      <div class="d-flex align-items-center gap-3">
        <p class="description mb-0">{{description}}</p>
        <i class="bi bi-pencil-square iconEdit" (click)="editDescription()"></i>
      </div>
    </div>

    <div *ngIf="isEditDescription">
      <h1 class="title">{{title}}</h1>
      <div class="d-flex flex-column gap-3">
        <input type="text"
              class="form-control"
              [(ngModel)]="description"
              placeholder="Ingrese la descripción">
        <div class="d-flex gap-2">
          <button class="btn btn-save" (click)="saveDescription()">Guardar</button>
          <button class="btn btn-cancel" (click)="editDescription()">Cancelar</button>
        </div>
      </div>
    </div>
  </section>
  <section class="sectionOtions">
      <div *ngFor="let option of options">
        <app-molecule-section-option
        [data]="option"
        (buttonOneClick)="handleBotonUno()"
        (buttonTwoClick)="handleBotonDos()">
        </app-molecule-section-option>
      </div>
    </section>
  <section id="rubryc" class="sectionRubric ">

    <app-template-rubric-table
    *ngIf="currentRubric && currentRubric.id"
    [rubric]="currentRubric">
    </app-template-rubric-table>
    
    <div class="d-flex justify-content-center">
      <button class="btn btn-edit mb-3"
        (click)="goToRubric()"
        *ngIf="currentRubric && currentRubric.id">
        <i class="bi bi-pencil-square"></i> 
        <span>Editar</span>
      </button>
    </div>
    <!-- Mensaje de carga o estado vacío -->
    <div *ngIf="!currentRubric || !currentRubric.id" class="text-center p-4">
      <p>Cargando rubrica</p>
      <button class="btn btn-primary mb-3"
      (click)="goToRubric()"
      >
      <i class="bi bi-plus-circle"></i> Agregar Rubrica

      </button>
    </div>

    <section class="m-4" id="evaluators">
<!--      <h2 class="subtitle">
        Evaludadores
      </h2>-->
      <app-template-list-teachers
        [title]="'Evaluadores asignados'"
        [description]="'Lista de evaluadores asignados a la RA'"
        [listTeachers]="evaluators"
      >
      </app-template-list-teachers>

    </section>

  </section>
</div>
